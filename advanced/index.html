<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="zend-paginator">  
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>Advanced - zend-paginator</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../css/styles-482aa2add1.css">

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-toggle="tooltip" data-placement="bottom" title="Go to the ZF homepage"><img src="../img/zf-logo-mark.svg" height="28" alt="Zend Framework" /></a>
                <a href="..">zend-paginator</a>
            </span>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../intro/">Intro</a>
                    </li>
                
                
                
                    <li >
                        <a href="../usage/">Usage</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../configuration/">Configuration</a>
</li>

                        
                            
<li class="active">
    <a href="./">Advanced</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" class="component-toggle" data-toggle="tooltip" data-placement="bottom" title="Show component list">
                        <i class="fa fa-book"></i> Components
                    </a>
                </li>

                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li>
                        <a href="https://github.com/zendframework/zend-paginator">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <!-- content:begin -->
    <div id="page-top" class="container docs">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#advanced-usage">Advanced usage</a></li>
        
            <li><a href="#custom-data-source-adapters">Custom data source adapters</a></li>
        
            <li><a href="#custom-scrolling-styles">Custom scrolling styles</a></li>
        
            <li><a href="#caching-features">Caching features</a></li>
        
    
    </ul>

    
</div></div>
        <div class="col-md-9" role="main">

<ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
  <li><a href="..">zend-paginator</a></li>
  
    
      
        <li>Reference</li>
      
    
  
  <li class="active">Advanced</li>
</ol>

<h1 id="advanced-usage">Advanced usage</h1>
<h2 id="custom-data-source-adapters">Custom data source adapters</h2>
<p>At some point you may run across a data type that is not covered by the packaged
adapters. In this case, you will need to write your own.</p>
<p>To do so, you must implement <code>Zend\Paginator\Adapter\AdapterInterface</code>. There
are two methods required to do this:</p>
<ul>
<li><code>count() : int</code></li>
<li><code>getItems(int $offset, int $itemCountPerPage) | array</code></li>
</ul>
<p>Additionally, you'll typically implement a constructor that takes your data
source as a parameter.</p>
<p>If you've ever used the SPL interface <a href="http://php.net/Countable">Countable</a>,
you're familiar with <code>count()</code>. As used with zend-paginator, this is the total
number of items in the data collection; <code>Zend\Paginator\Paginator::countAllItems</code>
proxies to this method.</p>
<p>When retrieving items for the current page, <code>Zend\Paginator\Paginator</code> calls on
your adapter's <code>getItems()</code> method, providing it with an offset and the number
of items to display per page; your job is to return the appropriate slice of
data. For an array, that would be:</p>
<pre class="codehilite"><code class="language-php">return array_slice($this-&gt;array, $offset, $itemCountPerPage);</code></pre>

<p>Take a look at the packaged adapters for ideas of how you might go about
implementing your own.</p>
<h2 id="custom-scrolling-styles">Custom scrolling styles</h2>
<p>Creating your own scrolling style requires that you implement
<code>Zend\Paginator\ScrollingStyle\ScrollingStyleInterface</code>, which defines a single
method:</p>
<pre class="codehilite"><code class="language-php">getPages(Paginator $paginator, int $pageRange = null) : array</code></pre>

<p>This method should calculate a lower and upper bound for page numbers within the
range of so-called "local" pages (that is, pages that are nearby the current
page).</p>
<p>Unless it extends another scrolling style (see
<code>Zend\Paginator\ScrollingStyle\Elastic</code> for an example), your custom scrolling
style will inevitably end with something similar to the following line of code:</p>
<pre class="codehilite"><code class="language-php">return $paginator-&gt;getPagesInRange($lowerBound, $upperBound);</code></pre>

<p>There's nothing special about this call; it's merely a convenience method to
check the validity of the lower and upper bound and return an array with the range
to the paginator.</p>
<p>When you're ready to use your new scrolling style, you'll need to notif
<code>Zend\Paginator\Paginator</code>:</p>
<pre class="codehilite"><code class="language-php">use My\Paginator\ScrollingStyle;
use Zend\Paginator\Paginator;
use Zend\ServiceManager\Factory\InvokableFactory;

$manager = Paginator::getScrollingStyleManager();
$manager-&gt;setAlias('my-style', ScrollingStyle::class);
$manager-&gt;setFactory(ScrollingStyle::class, InvokableFactory::class);</code></pre>

<h2 id="caching-features">Caching features</h2>
<p><code>Zend\Paginator\Paginator</code> can be told to cache the data it has already used,
preventing the adapter from fetching on next request. To tell
paginator to automatically cache the adapter's data, pass a pre-configured
<a href="https://zendframework.github.io/zend-cache/storage/adapter/">zend-cache adapter</a>
to the static <code>setCache()</code> method:</p>
<pre class="codehilite"><code class="language-php">use Zend\Cache\StorageFactory;
use Zend\Paginator\Paginator;

$cache = StorageFactory::adapterFactory('filesystem', [
    'cache_dir' =&gt; '/tmp',
    'ttl'       =&gt; 3600,
    'plugins'   =&gt; [ 'serializer' ],
]);
Paginator::setCache($cache);</code></pre>

<p>As long as the <code>Paginator</code> class has been seeded with a cache storage object,
the data any instance generates will be cached. If you want to disable caching, call
<code>setCacheEnabled()</code> with a boolean <code>false</code> on a concrete instance:</p>
<pre class="codehilite"><code class="language-php">use Zend\Paginator\Paginator;

// $cache is a Zend\Cache\Storage\StorageInterface instance
Paginator::setCache($cache);

// ... later on the script:
$paginator-&gt;setCacheEnabled(false);
// cache is now disabled for this instance.</code></pre>

<p>When a cache is set, data are automatically stored in it and pulled out from it.
It then can be useful to empty the cache manually. You can get this done by
calling <code>clearPageItemCache($pageNumber)</code>. If you don't pass any parameter, the
whole cache will be empty. You can optionally pass a parameter representing the
page number to empty in the cache:</p>
<pre class="codehilite"><code class="language-php">use Zend\Paginator\Paginator;

// $cache is a Zend\Cache\Storage\StorageInterface instance
Paginator::setCache($cache);

// $paginator is a fully configured Paginator instance:
$items = $paginator-&gt;getCurrentItems();

$page3Items = $paginator-&gt;getItemsByPage(3);
// page 3 is now in cache

// clear the cache of the results for page 3
$paginator-&gt;clearPageItemCache(3);

// clear all the cache data
$paginator-&gt;clearPageItemCache();</code></pre>

<p>Changing the item count per page will empty the whole cache as it would have
become invalid:</p>
<pre class="codehilite"><code class="language-php">use Zend\Paginator\Paginator;

// $cache is a Zend\Cache\Storage\StorageInterface instance
Paginator::setCache($cache);

// Fetch some items from an instance:
$items = $paginator-&gt;getCurrentItems();

// Changing item count flushes the cache:
$paginator-&gt;setItemCountPerPage(2);</code></pre>

<p>It is also possible to see the data in cache and ask for it directly.
<code>getPageItemCache()</code> can be used for that:</p>
<pre class="codehilite"><code class="language-php">use Zend\Paginator\Paginator;

// $cache is a Zend\Cache\Storage\StorageInterface instance
Paginator::setCache($cache);

// Set the item count:
$paginator-&gt;setItemCountPerPage(3);

// Fetch some items:
$items = $paginator-&gt;getCurrentItems();
$otherItems = $paginator-&gt;getItemsPerPage(4);

// See the cached items as a two-dimensional array:
var_dump($paginator-&gt;getPageItemCache());</code></pre>

<hr />

</div>
        
    </div>
    <!-- content:end -->

    <div id="footerwrap">
    <div class="container">
        <div class="row site-map">
            <div class="col-lg-3">
              <p>
                <strong>Zend Framework</strong><br />
                <a href="https://framework.zend.com/">framework.zend.com</a><br />
                <a href="https://docs.zendframework.com">docs.zendframework.com</a><br />
                <a href="https://packages.zendframework.com">packages.zendframework.com</a><br />
                <a href="https://apigility.org">apigility.org</a><br />
              </p>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12 centered">
                <a class="back-to-top" href="#page-top"><i class="fa fa-chevron-circle-up fa-4" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="spacing"></div>

        <div class="row">
            <div class="col-lg-8">
                <h4>Copyright</h4>
                <div class="hline-w"></div>

                <p>&copy; 2006-2017 by <a href="https://www.zend.com/">Zend</a>, a <a href="https://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>

            <div class="col-lg-4">
                <h4>Contacts</h4>
                <div class="hline-w"></div>
                <p>
                    <a href="https://discourse.zendframework.com" class="btn-social btn-outline" alt="Forum" title="Forum"><i class="fa fa-comments"></i></a>
                    <a href="https://zendframework-slack.herokuapp.com" class="btn-social btn-outline" alt="Slack" title="Slack"><i class="fa fa-slack"></i></a>
                    <a href="https://github.com/zendframework" class="btn-social btn-outline" alt="Github" title="Github"><i class="fa fa-github"></i></a>
                    <a href="https://twitter.com/zfdevteam" class="btn-social btn-outline" alt="Twitter" title="Twitter"><i class="fa fa-twitter"></i></a>
                </p>
            </div>
        </div>
    </div>
</div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
    <script>var base_url = '..';</script>
    <script src="../js/scripts-0b6185f4a5.js"></script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    <div class="zf-components">
  <div class="zf-components-grid">
    <div class="zf-logo">
      <a href="https://framework.zend.com" data-toggle="tooltip" data-placement="bottom" title="Go to the ZF homepage"><img src="../img/zf-logo-mark.svg" alt="Zend Framework" width="250" /></a>
    </div>

    <div class="component-list"></div>

    <p class="zf-components-rollup"><a href="#">Hide list</a></p>
  </div>
</div>

</body>

</html>
