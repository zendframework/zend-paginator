<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Paginate collections of data from arbitrary sources.">  
    <link rel="canonical" href="https://docs.zendframework.com/zend-paginator/advanced/">
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>Advanced Usage - zend-paginator - Zend Framework Docs</title>

    <link rel="stylesheet" href="../css/styles-5cfabd53ee.css">
</head>
<body id="page-top">

    
    <div class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">

            
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-tooltip data-placement="bottom" title="Go to the ZF homepage">
                    <img src="../img/zend-framework-logo.svg" height="28" alt="Zend Framework">
                </a>
            </span>
        </div>

        <div class="navbar-collapse collapse">

            
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="https://framework.zend.com/about">About</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/downloads">Install</a>
                </li>
                <li class="active">
                    <a href="https://docs.zendframework.com">Documentation</a>
                </li>
                <li>
                    <a href="https://www.zend.com/en/services/training">Training</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/blog">Blog</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/participate">Participate</a>
                </li>
            </ul>

            
            
                <div class="nav navbar-nav navbar-collapse visible-xs-block ">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">zend-paginator</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../intro/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../usage/" class="subnavigation__link">Usage</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Reference</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../configuration/" class="subnavigation__link">Configuration</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Advanced Usage</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="nav navbar-nav navbar-collapse visible-xs-block">
                <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</div>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-xs-8">
                <h1 class="header__title">
                    Documentation

                    
                        <small class="header__subtitle">zend-paginator</small>
                    
                </h1>
            </div>

            
            <div class="col-xs-4 text-right">
                
                    

                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/zendframework/zend-paginator/" class="header__link header__link--github" title="Go to repository of zend-paginator">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="laminas-announcement">
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                Zend Framework transitions to the Linux Foundation. <a href="https://getlaminas.org">Learn More.</a>
            </div>
        </div>
    </div>
</div>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-xs-12 content" role="main">
            <!-- content:begin -->
                
                    <ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
    <li><a href="https://framework.zend.com/">Home</a></li>

    
        <li><a href="https://docs.zendframework.com/">Documentation</a></li>

        
            <li><a href="..">zend-paginator</a></li>

            
                
                    
                    
                        <li>Reference</li>
                    
                
            

            <li class="active">Advanced Usage</li>
        
    
</ol>






    
    
        <h2 class="chapter__headline">Reference</h2>
    

    <div>
        
    

    
    
        <div class="toc">
            <h6 class="toc__headline">In This Article</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#custom-data-source-adapters" class="toc__link">Custom data source adapters</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#custom-scrolling-styles" class="toc__link">Custom scrolling styles</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#caching-features" class="toc__link">Caching features</a>
                    </li>
                
            </ul>
        </div>
    

    </div>

    <h1 id="advanced-usage">Advanced usage</h1>
<h2 id="custom-data-source-adapters">Custom data source adapters</h2>
<p>At some point you may run across a data type that is not covered by the packaged
adapters. In this case, you will need to write your own.</p>
<p>To do so, you must implement <code>Zend\Paginator\Adapter\AdapterInterface</code>. There
are two methods required to do this:</p>
<ul>
<li><code>count() : int</code></li>
<li><code>getItems(int $offset, int $itemCountPerPage) | array</code></li>
</ul>
<p>Additionally, you'll typically implement a constructor that takes your data
source as a parameter.</p>
<p>If you've ever used the SPL interface <a href="http://php.net/Countable">Countable</a>,
you're familiar with <code>count()</code>. As used with zend-paginator, this is the total
number of items in the data collection; <code>Zend\Paginator\Paginator::countAllItems</code>
proxies to this method.</p>
<p>When retrieving items for the current page, <code>Zend\Paginator\Paginator</code> calls on
your adapter's <code>getItems()</code> method, providing it with an offset and the number
of items to display per page; your job is to return the appropriate slice of
data. For an array, that would be:</p>
<p> <pre class=codehilite><code class=language-php>return array_slice($this-&gt;array, $offset, $itemCountPerPage);</code></pre></p>
<p>Take a look at the packaged adapters for ideas of how you might go about
implementing your own.</p>
<h2 id="custom-scrolling-styles">Custom scrolling styles</h2>
<p>Creating your own scrolling style requires that you implement
<code>Zend\Paginator\ScrollingStyle\ScrollingStyleInterface</code>, which defines a single
method:</p>
<p> <pre class=codehilite><code class=language-php>getPages(Paginator $paginator, int $pageRange = null) : array</code></pre></p>
<p>This method should calculate a lower and upper bound for page numbers within the
range of so-called "local" pages (that is, pages that are nearby the current
page).</p>
<p>Unless it extends another scrolling style (see
<code>Zend\Paginator\ScrollingStyle\Elastic</code> for an example), your custom scrolling
style will inevitably end with something similar to the following line of code:</p>
<p> <pre class=codehilite><code class=language-php>return $paginator-&gt;getPagesInRange($lowerBound, $upperBound);</code></pre></p>
<p>There's nothing special about this call; it's merely a convenience method to
check the validity of the lower and upper bound and return an array with the range
to the paginator.</p>
<p>When you're ready to use your new scrolling style, you'll need to notif
<code>Zend\Paginator\Paginator</code>:</p>
<p> <pre class=codehilite><code class=language-php>use My\Paginator\ScrollingStyle;
use Zend\Paginator\Paginator;
use Zend\ServiceManager\Factory\InvokableFactory;

$manager = Paginator::getScrollingStyleManager();
$manager-&gt;setAlias('my-style', ScrollingStyle::class);
$manager-&gt;setFactory(ScrollingStyle::class, InvokableFactory::class);</code></pre></p>
<h2 id="caching-features">Caching features</h2>
<blockquote>
<h3>Installation Requirements</h3>
<p>The caching features depends on the zend-cache component, so be sure to have
it installed before getting started:</p>
<p><pre class=codehilite><code class=language-bash>
$ composer require zendframework/zend-cache
</code></pre></p>
</blockquote>
<p><code>Zend\Paginator\Paginator</code> can be told to cache the data it has already used,
preventing the adapter from fetching on next request. To tell
paginator to automatically cache the adapter's data, pass a pre-configured
<a href="https://docs.zendframework.com/zend-cache/storage/adapter/">zend-cache adapter</a>
to the static <code>setCache()</code> method:</p>
<p> <pre class=codehilite><code class=language-php>use Zend\Cache\StorageFactory;
use Zend\Paginator\Paginator;

$cache = StorageFactory::adapterFactory('filesystem', [
    'cache_dir' =&gt; '/tmp',
    'ttl'       =&gt; 3600,
    'plugins'   =&gt; [ 'serializer' ],
]);
Paginator::setCache($cache);</code></pre></p>
<p>As long as the <code>Paginator</code> class has been seeded with a cache storage object,
the data any instance generates will be cached. If you want to disable caching, call
<code>setCacheEnabled()</code> with a boolean <code>false</code> on a concrete instance:</p>
<p> <pre class=codehilite><code class=language-php>use Zend\Paginator\Paginator;

// $cache is a Zend\Cache\Storage\StorageInterface instance
Paginator::setCache($cache);

// ... later on the script:
$paginator-&gt;setCacheEnabled(false);
// cache is now disabled for this instance.</code></pre></p>
<p>When a cache is set, data are automatically stored in it and pulled out from it.
It then can be useful to empty the cache manually. You can get this done by
calling <code>clearPageItemCache($pageNumber)</code>. If you don't pass any parameter, the
whole cache will be empty. You can optionally pass a parameter representing the
page number to empty in the cache:</p>
<p> <pre class=codehilite><code class=language-php>use Zend\Paginator\Paginator;

// $cache is a Zend\Cache\Storage\StorageInterface instance
Paginator::setCache($cache);

// $paginator is a fully configured Paginator instance:
$items = $paginator-&gt;getCurrentItems();

$page3Items = $paginator-&gt;getItemsByPage(3);
// page 3 is now in cache

// clear the cache of the results for page 3
$paginator-&gt;clearPageItemCache(3);

// clear all the cache data
$paginator-&gt;clearPageItemCache();</code></pre></p>
<p>Changing the item count per page will empty the whole cache as it would have
become invalid:</p>
<p> <pre class=codehilite><code class=language-php>use Zend\Paginator\Paginator;

// $cache is a Zend\Cache\Storage\StorageInterface instance
Paginator::setCache($cache);

// Fetch some items from an instance:
$items = $paginator-&gt;getCurrentItems();

// Changing item count flushes the cache:
$paginator-&gt;setItemCountPerPage(2);</code></pre></p>
<p>It is also possible to see the data in cache and ask for it directly.
<code>getPageItemCache()</code> can be used for that:</p>
<p> <pre class=codehilite><code class=language-php>use Zend\Paginator\Paginator;

// $cache is a Zend\Cache\Storage\StorageInterface instance
Paginator::setCache($cache);

// Set the item count:
$paginator-&gt;setItemCountPerPage(3);

// Fetch some items:
$items = $paginator-&gt;getCurrentItems();
$otherItems = $paginator-&gt;getItemsPerPage(4);

// See the cached items as a two-dimensional array:
var_dump($paginator-&gt;getPageItemCache());</code></pre></p>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../configuration/">
                    <i class="fa fa-chevron-left"></i> Previous
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
        </li>
    </ul>
</nav>




    <div class="help-wanted">
        <p>
            Found a mistake or want to contribute to the documentation?
            <a href="https://github.com/zendframework/zend-paginator/edit/master/docs/book/advanced.md" target="_blank" class="help-wanted__link">
                Edit this page on GitHub!
            </a>
        </p>
    </div>

                
            <!-- content:end -->
            </div>
            <div class="col-md-3 col-xs-12 sidebar">
                
                    <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">zend-paginator</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../intro/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../usage/" class="subnavigation__link">Usage</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Reference</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../configuration/" class="subnavigation__link">Configuration</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Advanced Usage</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <h5>Zend Framework</h5>
                <ul>
                    <li><a href="https://framework.zend.com/">framework.zend.com</a></li>
                    <li><a href="https://docs.zendframework.com">docs.zendframework.com</a></li>
                    <li><a href="https://packages.zendframework.com">packages.zendframework.com</a></li>
                    <li><a href="https://apigility.org">apigility.org</a></li>
                    <li><a href="https://getexpressive.org/">getexpressive.org</a></li>
                </ul>
            </div>
        </div>

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">

            
            <div class="col-md-9">
                <h4 class="footer__headline">Copyright</h4>
                <p>&copy; 2006-2019 by <a href="https://www.zend.com/">Zend</a>, a <a href="https://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>

            
            <div class="col-md-3">
                <h4 class="footer__headline">Support</h4>
                <ul class="support__list">
                    <li class="support__list-item">
                        <a href="https://discourse.zendframework.com" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://zendframework-slack.herokuapp.com" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://github.com/zendframework" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://twitter.com/zfdevteam" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://tinyletter.com/mwopzend" class="support__link" title="Newsletter"><i class="fa fa-envelope"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/blog/feed-rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

    <script>
        var base_url = '..',
            siteName = 'zend-paginator';
    </script>
    <script src="../js/scripts-8d7ae56abf.js"></script>
        <script src="../search/main.js"></script>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>



</body>


</html>
